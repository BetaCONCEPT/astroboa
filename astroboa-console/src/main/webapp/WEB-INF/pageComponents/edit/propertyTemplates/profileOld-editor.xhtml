<?xml version="1.0" encoding="UTF-8"?>
<!-- 

Copyright (C) 2005-2011 BetaCONCEPT LP.

		  This file is part of Astroboa.
		 
		  Astroboa is free software: you can redistribute it and/or modify
		  it under the terms of the GNU Lesser General Public License as published by
		  the Free Software Foundation, either version 3 of the License, or
		  (at your option) any later version.
		 
		  Astroboa is distributed in the hope that it will be useful,
		  but WITHOUT ANY WARRANTY; without even the implied warranty of
		  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
		  GNU Lesser General Public License for more details.
		 
		  You should have received a copy of the GNU Lesser General Public License
		  along with Astroboa.  If not, see <http://www.gnu.org/licenses/>.
		 
Authors 
		  Gregory Chomatas (gchomatas@betaconcept.com)
		  Savvas Triantafyllou (striantafyllou@betaconcept.com)
		 		    
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:ui="http://java.sun.com/jsf/facelets" 
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:f="http://java.sun.com/jsf/core" 
	xmlns:h="http://java.sun.com/jsf/html"  
	xmlns:c="http://java.sun.com/jstl/core" 
	xmlns:bcc="http://www.betaconceptframework.org/facelets/components">

	<body>
		<ui:composition>
			
			<div id="formFieldArea">
				<h:panelGrid columns="2" style="margin: 0 auto; width: 100%;">

					<h:outputText value="#{messages['content.object.identifier']}" style="font-size: 0.8em; font-weight: bold;"/>
					<h:outputText
						value="#{contentObjectEdit.selectedContentObjectForEdit.contentObject.id}" />

					<c:set var="hasVersion"
						value="#{contentObjectEdit.selectedContentObjectForEdit.contentObjectProperty['profile.hasVersion']}" />
					<h:outputText value="#{hasVersion.localizedLabelForCurrentLocale}" style="font-size: 0.8em; font-weight: bold;"/>
					<h:outputText value="#{hasVersion.simpleTypeValue}" />

					<c:set var="versions"
						value="#{contentObjectEdit.selectedContentObjectForEdit.contentObjectProperty['profile.versions']}" />
					<h:outputText value="#{versions.localizedLabelForCurrentLocale}" style="font-size: 0.8em; font-weight: bold;"/>
					<h:outputText value="#{versions.simpleTypeValues}" />

					<h:outputText value="#{messages['content.object.contentObjectType']}" style="font-size: 0.8em; font-weight: bold;"/>
					<h:outputText
						value="#{contentObjectEdit.selectedContentObjectForEdit.contentObjectTypeForCurrentLocale}" />

					<h:outputText
						value="#{contentObjectEdit.selectedContentObjectForEdit.contentObjectProperty['profile.contentObjectStatus'].localizedLabelForCurrentLocale}" 
						style="font-size: 0.8em; font-weight: bold;"/>
					<h:outputText
						rendered="#{!empty contentObjectEdit.selectedContentObjectForEdit.contentObjectProperty['profile.contentObjectStatus'].simpleTypeValue}"
						value="#{valueRangeUtil.localizedLabelOfValueInValueRange(
							contentObjectEdit.selectedContentObjectForEdit.contentObjectProperty['profile.contentObjectStatus'],
							contentObjectEdit.selectedContentObjectForEdit.contentObjectProperty['profile.contentObjectStatus'].simpleTypeValue)}"/>
					<h:panelGroup
						rendered="#{empty contentObjectEdit.selectedContentObjectForEdit.contentObjectProperty['profile.contentObjectStatus'].simpleTypeValue}" />

					<c:set var="created"
						value="#{contentObjectEdit.selectedContentObjectForEdit.contentObjectProperty['profile.created']}" />
					<h:outputText value="#{created.localizedLabelForCurrentLocale}" style="font-size: 0.8em; font-weight: bold;"/>
					<h:outputText value="#{created.simpleTypeValue.time}">
						<f:convertDateTime type="both" dateStyle="short"
							timeStyle="medium" timeZone="#{timeZoneSelector.timeZone.ID}" />
					</h:outputText>

					<c:set var="modified"
						value="#{contentObjectEdit.selectedContentObjectForEdit.contentObjectProperty['profile.modified']}" />
					<h:outputText value="#{modified.localizedLabelForCurrentLocale}" style="font-size: 0.8em; font-weight: bold;"/>
					<h:outputText
						value="#{modified.simpleTypeValue.time}">
						<f:convertDateTime type="both" dateStyle="short"
							timeStyle="medium" timeZone="#{timeZoneSelector.timeZone.ID}" />
					</h:outputText>

					<h:outputText value="#{messages['content.object.owner']}" style="font-size: 0.8em; font-weight: bold;"/>
					<h:outputText
						value="#{contentObjectEdit.selectedContentObjectForEdit.contentObjectOwnerName}" />

					<c:set var="title"
						value="#{contentObjectEdit.selectedContentObjectForEdit.contentObjectProperty['profile.title']}"/>
					<h:outputText value="*#{title.localizedLabelForCurrentLocale}" style="font-size: 0.8em; font-weight: bold;"/>
					<h:inputText style="font-size: 95%;"
						value="#{title.simpleTypeValue}" maxlength="100" size="80" />

					<c:set var="description"
						value="#{contentObjectEdit.selectedContentObjectForEdit.contentObjectProperty['profile.description']}" />
					<h:outputText
						value="*#{description.localizedLabelForCurrentLocale}" style="font-size: 0.8em; font-weight: bold;"/>
					<h:inputTextarea style="font-size: 120%;"
						value="#{description.simpleTypeValue}" maxlength="500" rows="7"
						cols="80" />

					<c:set var="language"
						value="#{contentObjectEdit.selectedContentObjectForEdit.contentObjectProperty['profile.language']}" />
					<h:outputText value="*#{language.getLocalizedLabelForLocale(localeSelector.localeString)}" style="font-size: 0.8em; font-weight: bold;"/>
					
					<h:panelGroup id="languagePanel">
						<rich:pickList value="#{language.simpleTypeValues}"> 
            				<f:selectItems value="#{languageSelector.languagesAsSelectItems}" />
        				</rich:pickList>
					</h:panelGroup>

					<c:set var="publisher"
						value="#{contentObjectEdit.selectedContentObjectForEdit.contentObjectProperty['profile.publisher']}" />
					<h:outputText value="#{publisher.localizedLabelForCurrentLocale}" style="font-size: 0.8em; font-weight: bold;"/>
					<h:inputText style="font-size: 95%;"
						value="#{publisher.simpleTypeValue}" maxlength="100" size="80" />

					<c:set var="creator"
						value="#{contentObjectEdit.selectedContentObjectForEdit.contentObjectProperty['profile.creator']}" />
					<h:outputText value="#{creator.localizedLabelForCurrentLocale}" style="font-size: 0.8em; font-weight: bold;"/>
					<h:panelGroup>

						<rich:dataTable
							value="#{creator.simpleTypeValues}" var="creatorValue"
							rowKeyVar="index">
							<rich:column>
								<h:outputText value="#{creatorValue}" />
							</rich:column>
							<rich:column>
								<a4j:commandLink
									action="#{contentObjectEdit.removeCreator_UIAction(index)}"
									reRender="creatorPanel"
									title="Πατήστε για να αφαιρέσετε τον δημιουργό από την λίστα">

									<img src="images/delete.jpg" border="0" width="16" height="16"
										align="top" />
								</a4j:commandLink>
							</rich:column>
						</rich:dataTable>

						<h:panelGroup>
							<h:inputText style="font-size: 95%;"
								value="#{contentObjectEdit.newCreatorName}" maxlength="100"
								size="20" />

							<a4j:commandLink
								styleClass="formItemClass"
								value="Πατήστε για να προσθέσετε το Δημιουργό στη λίστα"
								reRender="creatorPanel"
								action="#{contentObjectEdit.addNewCreator_UIAction}" />
						</h:panelGroup>

					</h:panelGroup>

					<c:set var="subject"
						value="#{contentObjectEdit.selectedContentObjectForEdit.contentObjectProperty['profile.subject']}" />
					<h:outputText value="#{subject.localizedLabelForCurrentLocale}" style="font-size: 0.8em; font-weight: bold;"/>
					<h:panelGrid columns="2">
						<a4j:outputPanel ajaxRendered="true">
							<rich:dataTable value="#{subject.simpleTypeValues}" var="topic">

								<f:facet name="header">
									<rich:columnGroup>
										<rich:column colspan="2">

											<a4j:outputPanel layout="block"
											rendered="#{contentObjectEdit.selectedContentObjectForEdit.loggedInUserAuthorizedToTagContentObject}">

												<rich:dropSupport acceptedTypes="topic"
													dropValue="#{contentObjectEdit.selectedContentObjectForEdit}"
													dropListener="#{contentObjectEdit.addDraggedAndDroppedTopicToContentObjectProfileSubject_Listener}"
													>


													<h:outputText
														value="Σύρετε μία θεματική ενότητα  που θέλετε να προσθέσετε από το δέντρο Θεματικών Ενοτήτων σε αυτή την περιοχή" />
												</rich:dropSupport>
											</a4j:outputPanel>
										</rich:column>
									</rich:columnGroup>
								</f:facet>

								<rich:column>

									<h:outputText style="font-size: 95%;"
										value="#{topic.localizedLabelForCurrentLocale}"
										rendered="#{topic.taxonomy.name eq 'bccms:subjectTaxonomy'}" />
									<h:outputText
										style="font-size: 95%; text-decoration: underline;"
										value="#{topic.localizedLabelForCurrentLocale}"
										rendered="#{! (topic.taxonomy.name eq 'bccms:subjectTaxonomy')}" />
								</rich:column>

								<rich:column>
									<a4j:commandLink
										rendered="#{contentObjectEdit.selectedContentObjectForEdit.loggedInUserAuthorizedToTagContentObject}"
										action="#{contentObjectEdit.removeTopicFromContentObjectSubject_UIAction}">

										<a4j:actionparam name="subjectTopicId"
											value="#{(empty topic.id)? topic.localizedLabelForCurrentLocale : topic.id}"
											assignTo="#{contentObjectEdit.selectedTopicIdForRemovalFromContentObjectSubject}" />

										<img src="images/delete.jpg" border="0" width="16" height="16"
											align="top" />
									</a4j:commandLink>
								</rich:column>

							</rich:dataTable>
						</a4j:outputPanel>

						<rich:panel id="addUserTagPanel" style="width: 300px;"
							headerClass="togglePanelHeaderClass"
							rendered="#{contentObjectEdit.selectedContentObjectForEdit.loggedInUserAuthorizedToTagContentObject}">
							<f:facet name="header">ΕΠΙΛΕΞΤΕ Ή ΠΡΟΣΘΕΣΘΕ ΤΙΣ ΔΙΚΕΣ ΣΑΣ ΕΤΙΚΕΤΕΣ ΚΑΤΗΓΟΡΙΟΠΟΙΗΣΗΣ</f:facet>


							<br />
							<h:outputText
								value="Επιπλέον των Ταξινομιών του Συστήματος, μπορείτε να κατηγοριοποιήσετε το αντικείμενο και με τις δικές σας Θεματικές Κατηγορίες." />
							<br />
							<h:outputText
								value="Οι Θεματικές Κατηγορίες που προσθέτουν οι χρήστες ονομάζονται Ετικέτες Χρηστών." />
							<br />
							<h:outputText
								value="Χρησιμοποιείστε το πεδίο που ακολουθεί για να προσθέσετε νέες ετικέτες ή διαλέξετε από τις ετικέτες που έχετε ήδη χρησιμοποιήσει." />
							<br />
							<h:panelGroup>
								<h:panelGrid columns="2">
									<h:inputText value="#{contentObjectEdit.newTagLabel}">
										<bcc:validateCapitalsOnly
											errorMessage="Ετικέτα χρήστη : #{messages['validator.capitalsOnly']}" />
									</h:inputText>
									<a4j:commandButton
										action="#{contentObjectEdit.addNewTagToContentObjectSubject_UIAction}"
										value="Προσθήκη" reRender="addUserTagPanel,myTags"
										style="font-size: 95%" />

									<h:message for="loggedInUserNewTagLabelInContentObjectEdit"
										style="color:red; font-weight:bold;" />
								</h:panelGrid>
							</h:panelGroup>


							<rich:spacer height="5" />

							<h:outputText
								value="Οι Ετικέτες μου" />
							<div id="loggedInUserTagsAreaIncontentObjectEdit">
								<h:panelGroup>
									<rich:dataList
										value="#{loggedInRepositoryUser.loadUserTagsOrderedByLabel()}"
										var="topic">
										<a4j:commandLink
											value=" [#{topic.getAvailableLocalizedLabel(localeSelector.localeString)}]"
											action="#{contentObjectEdit.addExistingUserTagToContentObjectSubject_UIAction}"
											title="Πατήστε για να προσθέσετε την Ετικέτα στη λίστα">

											<a4j:actionparam name="selectedLoggedInUserTagId"
												value="#{topic.id}" reRender="addUserTagPanel"
												assignTo="#{contentObjectEdit.selectedLoggedInUserTagId}" />

										</a4j:commandLink>
									</rich:dataList>
								</h:panelGroup>
							</div>
						</rich:panel>
					</h:panelGrid>

				</h:panelGrid>
			</div>

		</ui:composition>
	</body>
</html>
